# 交易的独立验证

\
在第6章中，我们看到钱包软件通过收集UTXO（未使用的交易输出）、提供适当的身份验证数据，然后构建分配给新所有者的新输出来创建交易。然后，生成的交易被发送到比特币网络中的相邻节点，以便在整个比特币网络中传播。

然而，在将交易转发到其邻居之前，每个接收到交易的比特币节点都会首先验证该交易。这确保只有有效的交易才会在网络中传播，而无效的交易则会在首个遇到它们的节点处被丢弃。

每个节点都会根据长长的检查清单验证每个交易：

* 交易的语法和数据结构必须正确。
* 输入和输出列表都不为空。
* 交易的重量足够小，以便使其适合在一个区块中。
* 每个输出值以及总值必须在允许的值范围内（大于等于零，但不超过2100万比特币）。
* 锁定时间等于INT\_MAX，或者锁定时间和序列值符合锁定时间和BIP68规则。
* 交易中包含的签名操作（SIGOPS）的数量少于签名操作限制
* 花费的输出与内存池中的输出或主分支中未花费的输出匹配。&#x20;
* 对于每个输入，如果引用的输出交易是coinbase输出，则必须至少有COINBASE\_MATURITY（100）次确认。任何绝对或相对锁定时间也必须满足。节点可能在它们成熟之前转发交易到一个区块，因为如果包含在下一个区块中，它们就会成熟。&#x20;
* 如果输入值的总和小于输出值的总和，则拒绝。&#x20;
* 每个输入的脚本必须针对相应的输出脚本进行验证。&#x20;

请注意，这些条件随着时间的推移而改变，以添加新功能或解决新类型的拒绝服务攻击。

通过在收到每个交易并在传播之前进行独立验证，每个节点构建了一个有效但尚未确认的交易池，称为内存池或mempool。
